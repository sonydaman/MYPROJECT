#pragma strict

var rotationSpeed	=	100;
var jumpHeight = 8;
private var playOnce =  true ;
private var isFalling = false; 
var hit01 : AudioClip;
var hit02 : AudioClip;
var hit03 : AudioClip;
function Update () {
	//Handle ball rotation.
	var rotation : float = Input.GetAxis("Horizontal") * rotationSpeed;
	rotation *= Time.deltaTime;
	GetComponent.<Rigidbody>().AddRelativeTorque(Vector3.back * rotation);
	//rigidbody.AddRelativeTorque(Vector3.back * rotation);
	// w is not press again
	if(Input.GetKeyDown(KeyCode.W) &&  isFalling == false)
	{
	//rigidbody.velocity.y = jumpHeight;
	GetComponent.<Rigidbody>().velocity.y = jumpHeight;
	playOnceTrue();	
	}
	isFalling = true;
	
}
// w is not press again
function OnCollisionStay(){
if(playOnce == true) {
			var theHit = Random.Range(0,4);
			if(theHit == 0)
				{GetComponent.<AudioSource>().clip = hit01; }
			else if(theHit == 1)
				{GetComponent.<AudioSource>().clip = hit02; }
			else
				{GetComponent.<AudioSource>().clip = hit03; }
				
			//GetComponent.<AudioSource>().pich = Random.Range(0.9,1.1);
			GetComponent.<AudioSource>().Play();
			playOnce = false;
		}
isFalling = false;
}
function playOnceTrue(){
 yield WaitForSeconds(0.2);
playOnce = true;

}
